# Points Reversed Event
# Published by: Points Engine
# Consumed by: None (notification systems in future)

$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "loyaltyforge://events/points-reversed/v1"

type: object
title: PointsReversedEvent
description: Event emitted when previously earned points are reversed.

required:
  - eventId
  - occurredAt
  - eventType
  - tenantId
  - customerId
  - pointsAmount
  - reason
  - transactionId
  - originalTransactionId

properties:
  eventId:
    type: string
    format: uuid

  occurredAt:
    type: string
    format: date-time

  eventType:
    type: string
    const: PointsReversedEvent

  tenantId:
    type: string
    format: uuid

  customerId:
    type: string
    format: uuid

  pointsAmount:
    type: integer
    minimum: 1
    description: Number of points reversed

  reason:
    type: string
    description: Reason for reversal (e.g., order refund)

  transactionId:
    type: string
    format: uuid
    description: Unique ledger transaction ID for this reversal

  originalTransactionId:
    type: string
    format: uuid
    description: Reference to the original transaction being reversed
